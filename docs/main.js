/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var e={};function t(){}e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.copyMap=function(e){return new Int8Array(e)},t.thinkAI=function(e,t,n,r,o,i){var c=!1,u=[void 0,0],s=new Int8Array(e);return i||(i=l),0!==a(s,!1)&&(c=!0),(u=d(s,t,n,r,o,c,i))[1]*t==-999999&&(u=d(s,t,1,r,o,c,i)),u},t.getCanMovePanelX=u,t.isEndX=a,t.isDraw=o;var n=[[0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,1,0],[0,1,0,0,0,0,1,0,1],[1,0,1,0,0,0,1,0,1],[1,0,1,0,0,0,1,1,1],[1,1,1,0,0,0,1,1,1],[1,0,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,1,1],[0,0,0,0,0,0,0,0,0],[1,1,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,0,1],[1,1,1,0,0,0,1,1,1],[1,1,1,0,0,0,1,0,1],[1,0,1,0,0,0,1,0,1],[1,0,1,0,0,0,0,1,0],[0,1,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0]],r=[0,1,2,3,4,5,10,11,12,13,14,15,20,21,22,23,24,25,30,31,32,33,34,35,40,41,42,43,44,45,50,51,52,53,54,55],l=[[],[1800,1850,1900,1950,2100,2800],[1800,1860,1920,2100,2400,3800],[1450,1520,1590,1900,2350,4450],[1450,1530,1610,2050,2650,5450],[1350,1440,1530,2100,2850,6350],[1350,1450,1550,2250,3150,7350],[1250,1360,1470,2300,3350,8250],[1250,1370,1490,2450,4350,11250]];function a(e,t){var n=0,l=0;if(e[0]>0&&(n+=e[0]),e[10]>0&&(n+=e[10]),e[20]>0&&(n+=e[20]),e[30]>0&&(n+=e[30]),e[40]>0&&(n+=e[40]),e[50]>0&&(n+=e[50]),-1*e[5]>0&&(l+=e[5]),-1*e[15]>0&&(l+=e[15]),-1*e[25]>0&&(l+=e[25]),-1*e[35]>0&&(l+=e[35]),-1*e[45]>0&&(l+=e[45]),-1*e[55]>0&&(l+=e[55]),n>=8)return 1;if(l<=-8)return-1;if(i(e))return n>-1*l?1:n<-1*l?-1:0;if(!1===t&&(0!==n||0!==l)){for(var a=0,o=0,c=0;c<=35;c++){var u=0|r[c];e[u]>0?a+=e[u]:e[u]<0&&(o+=e[u])}if(n>-1*(o+l))return 1;if(-1*l>a+n)return-1}return 0}function o(e){var t=0,n=0;return e[0]>0&&(t+=e[0]),e[10]>0&&(t+=e[10]),e[20]>0&&(t+=e[20]),e[30]>0&&(t+=e[30]),e[40]>0&&(t+=e[40]),e[50]>0&&(t+=e[50]),-1*e[5]>0&&(n-=e[5]),-1*e[15]>0&&(n-=e[15]),-1*e[25]>0&&(n-=e[25]),-1*e[35]>0&&(n-=e[35]),-1*e[45]>0&&(n-=e[45]),-1*e[55]>0&&(n-=e[55]),t===n&&!!i(e)}function i(e){for(var t=!1,n=!1,l=0;l<=35;l++){var a=0|r[l];if(0!==e[a]&&(!0===c(a,e)&&(e[a]>0?t=!0:e[a]<0&&(n=!0)),t&&n))return!1}return!0}function c(e,t){var r=0|t[e],l=~~(e/10),a=~~(e%10);if(r>0&&0===a||r<0&&5===a||0===r)return!1;for(var o=0;o<9;o++)if(0!==n[r+8][o]){var i=l+~~(o%3)-1,c=a+~~(o/3)-1;if(!(c<0||c>5||i>5||i<0)){var u=t[10*i+c];if(!(u*r>0||u>0&&0===c||u<0&&5===c))return!0}}return!1}function u(e,t){var r=0|t[e],l=~~(e/10),a=~~(e%10),o=[];if(r>0&&0===a||r<0&&5===a||0===r)return o;for(var i=0;i<9;i++)if(0!==n[r+8][i]){var c=l+~~(i%3)-1,u=a+~~(i/3)-1;if(!(u<0||u>5||c>5||c<0)){var d=10*c+u,s=0|t[d];s*r>0||s>0&&0===u||s<0&&5===u||o.push(d)}}return o}function d(e,t,n,l,c,s,h){var f,v=9999999*t*-1;if(0===n)return[f,v=function(e,t,n){var l=0;if(o(e))return 0;var i=a(e,t);if(1===i)return 9999999;if(-1===i)return-9999999;for(var c=0;c<=35;c++){var u=0|r[c],d=0,s=e[u],h=void 0;s>0?(h=5-u%10,d+=n[s][h]):s<0&&(h=u%10,d+=-1*n[-1*s][h]),l+=d}return 0|l}(e,s,h)];void 0!==l&&void 0!==c||(l=9999999*t*-1,c=9999999*t);for(var g=function(e,t){for(var n=[],l=0;l<=35;l++){var a=0|r[l];if(!(e[a]*t<=0||0===e[a]))for(var o=u(a,e),i=0;i<o.length;i++){var c=new Int8Array(e);c[o[i]]=c[a],c[a]=0,n.push([[a,o[i]],c])}}return n}(e,t),m=0;m<g.length;m++){var w=g[m][0],p=g[m][1],y=0,S=a(p,s);if(S===t)return[w,999999*t];if(S!==-1*t){if(y=i(p)?0:d(p,-1*t,n-1,c,l,s,h)[1],void 0===f&&(v=y,f=w),(1===t&&y>v||-1===t&&y<v)&&(v=y,f=w),(1===t&&l<v||-1===t&&l>v)&&(l=v),1===t&&c<=v||-1===t&&c>=v)break}else void 0===f&&(v=999999*t*-1,f=w)}return[f,v]}!function(e){e.BoardGamejs=function(){},e.BoardGamejs.init=function(){Z(),window.innerHeight<window.innerWidth?document.querySelector(".manual").classList.remove("hide"):document.querySelector(".manual").classList.add("hide"),n=document.querySelector("#canv").getContext("2d"),(a=document.createElement("canvas")).width=Y,a.height=Y,(o=document.createElement("canvas")).width=Y,o.height=Y,(i=document.createElement("canvas")).width=Y,i.height=Y,(c=document.createElement("canvas")).width=Y,c.height=Y,(u=document.createElement("canvas")).width=Y,u.height=Y,(d=document.createElement("canvas")).width=Y,d.height=Y,(s=document.createElement("canvas")).width=Y,s.height=Y,(h=document.createElement("canvas")).width=Y,h.height=Y,(f=document.createElement("canvas")).width=Y,f.height=Y,(v=document.createElement("canvas")).width=Y,v.height=Y,(g=document.createElement("canvas")).width=Y,g.height=Y,y=Y/6,S=1,P=!0,n.canvas.style.width=Y/F+"px",n.canvas.style.height=Y/F+"px",n.canvas.width=Y,n.canvas.height=Y,(r="ontouchstart"in window)?(document.querySelector("#canv").addEventListener("touchstart",ne),document.querySelector("#canv").addEventListener("touchmove",te)):(document.querySelector("#canv").addEventListener("mousemove",ee),document.querySelector("#canv").addEventListener("mouseup",ne)),document.querySelector("#level").addEventListener("change",re),document.querySelector("#prevprev").addEventListener("click",me),document.querySelector("#prev").addEventListener("click",we),document.querySelector("#next").addEventListener("click",pe),document.querySelector("#nextnext").addEventListener("click",ye),document.querySelector("#replay").addEventListener("click",be),document.querySelector("#tweetlog").addEventListener("click",Ie),document.querySelector("#newgame").addEventListener("click",Se),document.querySelector("#collapsible").addEventListener("click",(function(){if(document.querySelector(".manual").classList.toggle("hide"),window.innerHeight>window.innerWidth){var e=document.documentElement,t=e.scrollHeight-e.clientHeight;window.scroll(0,t)}})),window.addEventListener("orientationchange",Z),oe(),K.getItem("level_1")||K.setItem("level_1",0),K.getItem("level_2")||K.setItem("level_2",0),K.getItem("level_3")||K.setItem("level_3",0),K.getItem("level_4")||K.setItem("level_4",0),K.getItem("level_5")||K.setItem("level_5",0),void 0!==K.getItem("level_save")&&"undefined"!==K.getItem("level_save")&&null!==K.getItem("level_save")?document.querySelector("#level").value=parseInt(K.getItem("level_save")):(K.setItem("level_save",1),document.querySelector("#level").value=1);var e,m,p,b,I,M,x=ve();x.init?(H=function(e){var n;if(e){for(var r in n=t.copyMap(j))n[r]=0;var l=e.split(",");l.length<8&&(l=[1,2,3,4,5,6,7,8]);var a=[0,10,20,30,40,50,11,41],o=[55,45,35,25,15,5,44,14];for(var i in o)n[o[i]]=parseInt(l[i]);for(var c in a)n[a[c]]=-1*parseInt(l[c])}return n}(x.init),j=t.copyMap(H)):H=t.copyMap(j),x.log&&(N=function(e,n){var r=[],l=t.copyMap(n),a={q:0,w:1,e:2,a:3,s:4,d:5,z:6,x:7,c:8},o=(e=(e=(e=e.replace(/q/g,"q,").replace(/w/g,"w,").replace(/e/g,"e,")).replace(/a/g,"a,").replace(/s/g,"s,").replace(/d/g,"d,")).replace(/z/g,"z,").replace(/x/g,"x,").replace(/c/g,"c,")).split(",");r.push(l);for(var i=0;i<o.length;i++)if(""!==o[i]){var c=a[o[i].match(/[qweasdzxc]/)[0]],u=parseInt(o[i].match(/\d*/)[0]),d=10*(Math.floor(u/10)+Math.floor(c%3)-1)+(Math.floor(u%10)+Math.floor(c/3)-1);(l=t.copyMap(l))[d]=parseInt(l[u]),l[u]=0,r.push(l)}return r}(x.log,H)),x.lv&&(document.querySelector("#level").value=parseInt(x.lv)),0!==N.length?(document.querySelector("#log").classList.remove("hide"),document.querySelector("#prevprev").classList.remove("hide"),document.querySelector("#prev").classList.remove("hide"),document.querySelector("#next").classList.remove("hide"),document.querySelector("#nextnext").classList.remove("hide"),document.querySelector("#span_replay").classList.add("hide"),document.querySelector("#span_tweetlog").classList.add("hide"),document.querySelector("#next").focus()):(document.querySelector("#log").classList.add("hide"),document.querySelector("#prevprev").classList.add("hide"),document.querySelector("#prev").classList.add("hide"),document.querySelector("#next").classList.add("hide"),document.querySelector("#nextnext").classList.add("hide"),document.querySelector("#span_replay").classList.add("hide"),document.querySelector("#span_tweetlog").classList.add("hide")),J.onload=function(){w=!0,ce(!0,!1)},J.onerror=function(){ce(!0,!1)},0!==J.width&&(w=!0,ce(!0,!1)),setTimeout((function(){0!==J.width&&(w=!0),ce(!0,!1)}),2500),se(),p="script",b="twitter-wjs",M=(m=document).getElementsByTagName(p)[0],m.getElementById(b)||((I=m.createElement(p)).id=b,I.async=!0,I.src="https://platform.twitter.com/widgets.js",M.parentNode.insertBefore(I,M)),0===N.length?0==(-1!=(e=window.navigator.userAgent.toLowerCase()).indexOf("bot")||-1!=e.indexOf("lighthouse")||-1!=e.indexOf("headless"))&&window.setTimeout((function(){1==P&&(L=window.setInterval(Q,400),Q())}),500):(P=!1,C=!0,E=window.setInterval(V,1e3)),l=!1,ce(!0,!1)};var n=null,r=!0,l=!1,a=null,o=null,i=null,c=null,u=null,d=null,s=null,h=null,f=null,v=null,g=null,m=!1,w=!1,p=null,y=null,S=null,b=0,I=0,M=null,x="",q=0,P=!0,C=!1,L=null,E=null,T=[],A=0,k="#333333",_="#111111",R="#7fed7f",B="#E60073",O="#0099E6",X="#FFFFFF",F=1;void 0!==window.devicePixelRatio&&1!=window.devicePixelRatio&&(F=window.devicePixelRatio);var H,Y=500*F,G={1:[1,1,1,1,0,1,1,1,1],2:[1,1,1,1,0,1,1,0,1],3:[1,1,1,0,0,0,1,1,1],4:[1,1,1,0,0,0,1,0,1],5:[1,0,1,0,0,0,1,0,1],6:[1,0,1,0,0,0,0,1,0],7:[0,1,0,0,0,0,0,1,0],8:[0,1,0,0,0,0,0,0,0],"-1":[1,1,1,1,0,1,1,1,1],"-2":[1,0,1,1,0,1,1,1,1],"-3":[1,1,1,0,0,0,1,1,1],"-4":[1,0,1,0,0,0,1,1,1],"-5":[1,0,1,0,0,0,1,0,1],"-6":[0,1,0,0,0,0,1,0,1],"-7":[0,1,0,0,0,0,0,1,0],"-8":[0,0,0,0,0,0,0,1,0]},j=[-1,0,0,0,0,6,0,0,0,0,-2,-8,0,0,7,5,0,0,0,0,-3,0,0,0,0,4,0,0,0,0,-4,0,0,0,0,3,0,0,0,0,-5,-7,0,0,8,2,0,0,0,0,-6,0,0,0,0,1],D={},W=0,z=0,$=0,N=[],U=[],J=null;(J=new Image).src="bk.gif";var K=null;try{window==parent&&"localStorage"in window&&null!==window.localStorage&&(K=localStorage).setItem("test",0)}catch(e){K=null}function Q(){null!==L&&(Math.random()>.3?le(2):le(1)),A++,fe(),ce(!1,!1),1!==M&&-1!==M&&0!==M||(l=!0,M=null,ce(!1,!1),oe()),A>42&&window.clearInterval(L)}function V(){null!==E&&1==C?pe():clearInterval(E)}function Z(){var e=document.querySelector("meta[name=viewport]");if(screen.width<500&&screen.height<500?screen.width<screen.height?e.setAttribute("content","width=500,user-scalable=no"):e.setAttribute("content","height=500,user-scalable=no"):screen.width<500?e.setAttribute("content","width=500,user-scalable=no"):screen.height<500&&e.setAttribute("content","height=500,user-scalable=no"),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){var t=screen.width,n=520;0!==Math.abs(window.orientation)&&(t=screen.height,n=900);var r=Math.round(t/n*1e3)/1e3;r==Math.round(r)&&(r+=1e-4),e.setAttribute("content","initial-scale="+r+", minimum-scale="+r+", maximum-scale="+r+", user-scalable=no")}}function ee(e){ie(e),ce(!1,!0)}function te(e){e.preventDefault(),e.stopPropagation()}function ne(e){ie(e);var n=10*Math.floor(W/y)+Math.floor(z/y);if(null!==M||0!==N.length)return Se(),!0;if(!0===P)return P=!1,T=[],j=t.copyMap(H),U=[],ce(!1,!1),M=null,l=!1,S=1,window.clearInterval(L),ce(!1,!1),!0;if(null===p)j[n]*S>0&&(p=n);else{if(n==p)return p=null,void ce(!1,!1);t.getCanMovePanelX(p,j).indexOf(n)>=0&&(ce(!1,!0),ae(0,n,S)&&(l=!0,ce(!1,!0),setTimeout((function(){l=!1,ce(!1,!1)}),2e3)),j[n]=j[p],j[p]=0,S*=-1,U.push([p,n]),T=[p,n],p=null,x="thinking...",window.setTimeout((function(){ce(!1,!1)}),50),se(),null===M&&window.setTimeout((function(){le(document.querySelector("#level").value),x="",se(),ce(!1,!1)}),250))}ce(!1,!1)}function re(){var e=document.querySelector("#level").value;K.setItem("level_save",e),K.getItem("level_"+e)>0?document.querySelector("#wins").innerHTML=K.getItem("level_"+e)+" win!":document.querySelector("#wins").innerHTML="",j=t.copyMap(H),T=[],D={},U=[],ce(!1,!1)}function le(e){var n,r,a=new Date,o=function(e){var n=0;for(var r in e)0!==e[r]&&(n+=t.getCanMovePanelX(r,e).length);return n}(j)/2,i=0;switch(e=parseInt(e)){case 1:o<=7&&i++;break;case 2:o<=8&&i++;break;case 3:o<=10&&i++,o<=6&&i++;break;case 4:o<=11&&i++,o<=7&&i++;break;case 5:case 6:o>16&&i--,o<=12&&i++,o<=8&&i++}n=t.thinkAI(j,S,e+i+1)[0],T=n,n&&(ae(0,n[1],S)&&(l=!0,ce(!1,!0),setTimeout((function(){l=!1,ce(!1,!1)}),2e3)),j[n[1]]=j[n[0]],j[n[0]]=0,U.push([n[0],n[1]])),S*=-1,r=new Date,q=(r-a)/1e3}function ae(e,t,n){if(n>0){if(t%10==0)return!0}else if(n<0&&t%10==5)return!0;return!1}function oe(){for(var e in j)j[e]=0;for(var t=[1,2,3,4,5,6,7,8],n=[0,10,20,30,40,50,11,41],r=[55,45,35,25,15,5,44,14],l=t.length-1;l>=0;l--){var a=Math.floor(Math.random()*(l+1)),o=t[l];t[l]=t[a],t[a]=o}for(var i in r)j[r[i]]=t[i];for(var c in n)j[n[c]]=-1*t[c]}function ie(e){if(null!=e){e.clientX||(e=e.touches||e.touches?e.touches[0]:event.touches[0]);var t=e.target.getBoundingClientRect();W=e.clientX-t.left,z=e.clientY-t.top,W*=F,z*=F}}function ce(e,h){var w,q=new Int8Array(j);if(n.clearRect(0,0,Y,Y),!1===h&&(m=!1),!1===h||!1===m){n.drawImage(function(e){if(!1===e)return a;var t=a.getContext("2d");t.clearRect(0,0,Y,Y);var n=t.createLinearGradient(0,0,Y,Y);n.addColorStop(0,"#888888"),n.addColorStop(.3,"#444444"),n.addColorStop(1,_);for(var r=0;r<6;r++)for(var l=0;l<6;l++)t.strokeStyle=k,0===l?t.fillStyle="#660033":5==l?t.fillStyle="#004466":(r+l)%2==0?t.fillStyle="#FFFFFF":(t.fillStyle=_,t.fillStyle=n),t.beginPath(),t.fillRect(r*y,l*y,y,y),t.strokeRect(r*y,l*y,y,y);return a}(e),0,0,Y,Y),n.drawImage(function(e){if(!1===e)return o;var t=o.getContext("2d");return t.clearRect(0,0,Y,Y),t.globalAlpha=.07,t.fillStyle=X,t.beginPath(),t.arc(1*y,-3*y,7*y,0,2*Math.PI,!1),t.fill(),o}(e),0,0,Y,Y),null!==p&&(q[p]=0),n.drawImage(function(e,t){var n=u.getContext("2d");n.clearRect(0,0,Y,Y);var r,l,a,o,i,c,d,s,h,f,v=t[0]/10|0,g=t[0]%10,m=t[1]/10|0,w=t[1]%10,p=y-1*y/5,S=y-1*y/5,b=m*y+y/10,I=w*y+y/10,M=b+S/2,x=I+p/2,q=M,P=x,C=e[t[1]],L=0;if(2!=t.length)return u;(l=C>0?O:B,v==m||g==w)?(L=(v+g)%2==0&&0!==g&&5!=g?.5:.3,v<m&&(b=b-S+10,q-=S),v>m&&(b=b+S-10,q+=S),g<w&&(I=I-p+10,P-=p),g>w&&(I=I+p-10,P+=p),(r=n.createLinearGradient(M,x,q,P)).addColorStop(0,l),r.addColorStop(L,l),r.addColorStop(1,"rgba(255, 255, 255, 0)"),n.fillStyle=r,n.fillRect(b,I,p,S)):(L=(v+g)%2==0&&0!==g&&5!=g?.3:.5,v<m&&g<w&&(a=b,o=I-p,i=b+S,c=I,d=b,s=I+p,h=b-S,f=I,q-=S,P-=p,M+=2*S,x+=2*p),v>m&&g>w&&(a=b+S,o=I,i=b+S+S,c=I+p,d=b+S,s=I+p+p,h=b,f=I+p,q+=S,P+=p,M-=2*S,x-=2*p),v<m&&g>w&&(a=b,o=I,i=b+S,c=I+p,d=b,s=I+p+p,h=b-S,f=I+p,q-=S,P+=p,M+=2*S,x-=2*p),v>m&&g<w&&(a=b+S,o=I-p,i=b+S+S,c=I,d=b+S,s=I+p,h=b,f=I,q+=S,P-=p,M-=2*S,x+=2*p),n.beginPath(),n.moveTo(a,o),n.lineTo(i,c),n.lineTo(d,s),n.lineTo(h,f),n.lineTo(a,o),n.closePath(),(r=n.createLinearGradient(M,x,q,P)).addColorStop(0,l),r.addColorStop(L,l),r.addColorStop(.97,"rgba(255, 255, 255, 0)"),n.fillStyle=r,n.fill());return u}(q,T),0,0,Y,Y),n.drawImage(function(e){var t=c.getContext("2d");t.clearRect(0,0,Y,Y);for(var n=0;n<6;n++)for(var r=0;r<6;r++)if(0!==e[10*n+r]){var l=!1;(e[10*n+r]>0&&0===r||e[10*n+r]<0&&5==r)&&(l=!0),t=ue(t,n*y,r*y,e[10*n+r],l)}return c}(q),0,0,Y,Y);var L=g.getContext("2d");L.clearRect(0,0,Y,Y),L.drawImage(n.canvas,0,0,Y,Y),m=!0}else n.drawImage(g,0,0,Y,Y);n.drawImage(((w=d.getContext("2d")).clearRect(0,0,Y,Y),null!==p&&ue(w,W-y/2,z-y/2,j[p],!1),d),0,0,Y,Y),0===W&&0===z||!1!==P||n.drawImage(function(){var e=W-W%y,n=z-z%y,l=i.getContext("2d"),a=l.createRadialGradient(e,n,0,e,n,y);if(a.addColorStop(.3,R),a.addColorStop(1,"#148d14"),l.clearRect(0,0,Y,Y),l.globalAlpha=.35,l.fillStyle=a,l.lineWidth=1,l.beginPath(),l.fillRect(e,n,y,y),!0===r&&null===p)return i;var o=e/y*10+n/y;if(j[o]*S>0)for(var c=t.getCanMovePanelX(o,j),u=0;u<=c.length-1;u++)e=Math.floor(c[u]/10),n=Math.floor(c[u]%10),l.globalAlpha=.6,l.strokeStyle=R,l.lineWidth=y/20,l.beginPath(),l.arc(e*y+y/2,n*y+y/2,y/2-y/10,0,2*Math.PI,!1),l.stroke();return i}(),0,0,Y,Y),(l||null!==M)&&!1===P&&0==C&&n.drawImage(function(){var e=v.getContext("2d"),t="",n=Math.round(1.5*y),r="#0099E6",l="#E60073";return e.clearRect(0,0,Y,Y),e.globalAlpha=.4,e.textBaseline="middle",e.textAlign="center",e.shadowBlur=10,e.shadowColor="rgba(0, 0, 0, 0.5)",e.font="bold "+n+"px Play,sans-serif",e.globalAlpha=.3,e.shadowBlur=2,e.shadowColor="rgba(255, 255, 255, 1)",e.fillStyle=l,t=I,e.beginPath(),e.fillText(t,1*y,3.8*y),t="8",e.beginPath(),e.fillText(t,2*y,5.3*y),e.lineWidth=.2*y,e.strokeStyle=l,e.beginPath(),e.moveTo(.4*y,5.55*y),e.lineTo(2.6*y,3.55*y),e.closePath(),e.stroke(),t=b,e.fillStyle=r,e.beginPath(),e.fillText(t,4*y,.7*y),t="8",e.beginPath(),e.fillText(t,5*y,2.3*y),e.lineWidth=.2*y,e.strokeStyle=r,e.beginPath(),e.moveTo(3.4*y,2.55*y),e.lineTo(5.6*y,.55*y),e.closePath(),e.stroke(),v}(),0,0,Y,Y),n.drawImage(function(){var e=s.getContext("2d"),t=1.3*y,n=2.5*y;if(e.clearRect(0,0,Y,Y),""===x)return s;e.shadowBlur=10,e.shadowColor="rgba(100, 100, 100, 0.5)",e.shadowOffsetX=5,e.shadowOffsetY=5,e.globalAlpha=.9,e.fillStyle=X,de(e,t,n,3.4*y,1*y,y/20);var r=Math.round(.36*y);return e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowColor="rgba(0, 0, 0, 0)",e.font="bold "+r+"px Play,sans-serif",e.globalAlpha=1,e.fillStyle=k,e.textBaseline="middle",e.textAlign="center",e.beginPath(),e.fillText(x,3*y,3*y),s}(),0,0,Y,Y),!0===P&&n.drawImage(function(){var e=f.getContext("2d");e.clearRect(0,0,Y,Y),e.globalAlpha=.5,e.fillStyle="#000000",e.fillRect(0,0,Y,Y);var t=2*y,n=3.5*y;e.shadowBlur=20,e.shadowColor="rgba(0, 0, 0, 0.3)",e.shadowOffsetX=5,e.shadowOffsetY=5,e.globalAlpha=.8,e.fillStyle=X,e.beginPath(),de(e,t,n,2*y,1*y,y/20),e.shadowColor="rgba(0, 0, 0, 0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;var r=Math.round(.5*y),l="Play";return l+=A%10==0?" ":"",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowColor="rgba(0, 0, 0, 0)",e.font="bold "+r+"px Play,sans-serif",e.globalAlpha=1,e.fillStyle=k,e.textBaseline="middle",e.textAlign="center",e.beginPath(),e.fillText(l,3*y,4*y),l="colamone",r=Math.round(1*y),e.font="bold "+r+"px Play,sans-serif",e.fillStyle=X,e.shadowBlur=0,e.beginPath(),e.fillText(l,3*y,2*y),f}(),0,0,Y,Y)}function ue(e,t,r,l,a){var o;if(0===l)return e;o=l>0?O:B;var i,c=n.createLinearGradient(t,r,t+y,r+y);c.addColorStop(0,"rgb(255, 255, 255)"),c.addColorStop(.4,o),c.addColorStop(1,o),e.shadowBlur=10,e.shadowColor="rgba(0, 0, 0, 1)",e.shadowOffsetX=2,e.shadowOffsetY=2,e.fillStyle=c,e.beginPath(),de(e,t+y/10,r+y/10,y-1*y/5,y-1*y/5,y/20),e.shadowColor="rgba(0, 0, 0, 0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,w&&(e.globalAlpha=.35,e.save(),e.clip(),e.drawImage((i=h.getContext("2d"),w&&i.drawImage(J,0,0,Y/F,Y/F,0,0,Y,Y),h),t+y/10,r+y/10,y-1*y/5,y-1*y/5),e.restore(),e.globalAlpha=1),e.fillStyle=X;var u=Math.round(.18*y);e.textBaseline="middle",e.textAlign="center",e.font=u+"pt 'Play',Arial",e.beginPath(),e.fillText(Math.abs(l),t+y/2,r+y/2);for(var d=0;d<=G[l].length-1;d++)if(0!==G[l][d]){var s=t+y/4.16+Math.floor(y-1*y/5)/3*Math.floor(d%3),f=r+y/4.16+Math.floor(y-1*y/5)/3*Math.floor(d/3);e.fillStyle=X,e.beginPath(),e.arc(s,f,.06*y,0,2*Math.PI,!1),e.fill()}return a&&(e.shadowBlur=10,e.shadowColor="rgba(0, 0, 0, 1)",e.globalAlpha=1,e.fillStyle=X,u=Math.round(.5*y),e.textBaseline="middle",e.textAlign="center",e.font="bolder "+u+"pt Play,Arial ",e.beginPath(),e.fillText(Math.abs(l),t+y/2,r+y/2),e.globalAlpha=1,e.shadowColor="rgba(0, 0, 0, 0)",e.shadowBlur=0),e}function de(e,t,n,r,l,a){e.beginPath(),e.moveTo(t+a,n),e.lineTo(t+r-a,n),e.arc(t+r-a,n+a,a,1.5*Math.PI,0,!1),e.lineTo(t+r,n+l-a),e.arc(t+r-a,n+l-a,a,0,.5*Math.PI,!1),e.lineTo(t+a,n+l),e.arc(t+a,n+l-a,a,.5*Math.PI,Math.PI,!1),e.lineTo(t,n+a),e.arc(t+a,n+a,a,Math.PI,1.5*Math.PI,!1),e.closePath(),e.fill()}function se(){fe(),document.querySelector("#blue").innerHTML="Blue: "+b+"/8",document.querySelector("#red").innerHTML=" Red: "+I+"/8",document.querySelector("#time").innerHTML="("+q.toFixed(3)+"sec)",0===N.length&&(1==M?(x="You win!",K.setItem("level_"+document.querySelector("#level").value,parseInt(K.getItem("level_"+document.querySelector("#level").value))+1),he()):-1==M?(x="You lose...",K.setItem("level_"+document.querySelector("#level").value,0),he()):0===M&&(x=D[JSON.stringify(j)]>=3?"3fold repetition":"-- Draw --",he())),K.getItem("level_"+document.querySelector("#level").value)>0?document.querySelector("#wins").innerHTML=K.getItem("level_"+document.querySelector("#level").value)+" win!":document.querySelector("#wins").innerHTML=""}function he(){0===N.length&&(document.querySelector("#span_replay").classList.remove("hide"),document.querySelector("#span_tweetlog").classList.remove("hide"))}function fe(){var e,n,r=0,l=0,a=[0,10,20,30,40,50],o=[5,15,25,35,45,55];for(var i in a)1*j[a[i]]>0&&(r+=j[a[i]]);for(var c in o)-1*j[o[c]]>0&&(l+=j[o[c]]);r>=8?M=1:l<=-8&&(M=-1),function(e){var n=!1,r=!1;for(var l in e)if(0!==e[l]&&(0!==t.getCanMovePanelX(l,e).length&&(e[l]>0?n=!0:e[l]<0&&(r=!0)),n&&r))return!1;return!0}(j)?Math.abs(r)>Math.abs(l)?M=1:Math.abs(r)<Math.abs(l)?M=-1:Math.abs(r)==Math.abs(l)&&(M=0):!0==(e=j,n=JSON.stringify(e),void 0===D[n]?(D[n]=1,!1):(D[n]+=1,D[n]>=3))&&(M=0),b=Math.abs(r),I=Math.abs(l)}function ve(){var e={};if(1<document.location.search.length)for(var t=document.location.search.substring(1).split("&"),n=0;n<t.length;n++){var r=t[n].split("="),l=decodeURIComponent(r[0]),a=decodeURIComponent(r[1]);e[l]=decodeURIComponent(a)}return e}function ge(e){var t="";for(var n in e){var r=e[n][0],l=e[n][1],a=Math.floor(l/10)-Math.floor(r/10),o=Math.floor(l%10)-Math.floor(r%10),i="";-1===a&&-1===o&&(i="q"),0===a&&-1===o&&(i="w"),1===a&&-1===o&&(i="e"),-1===a&&0===o&&(i="a"),0===a&&0===o&&(i="s"),1===a&&0===o&&(i="d"),-1===a&&1===o&&(i="z"),0===a&&1===o&&(i="x"),1===a&&1===o&&(i="c"),t+=r+i}return t}function me(){$=0,C=!1,j=t.copyMap(N[$]),M=null,l=!1,se(),ce(!1,!1)}function we(){$<=0||(C=!1,$-=1,j=t.copyMap(N[$]),M=null,l=!1,se(),ce(!1,!1))}function pe(){$+1>N.length-1||($+=1,j=t.copyMap(N[$]),se(),ce(!1,!1))}function ye(){$=N.length-1,C=!1,j=t.copyMap(N[$]),se(),ce(!1,!1)}function Se(){var e=document.location.href.split("?")[0];if(!0!==P){var n=ve();n.lang&&(e+="?lang="+n.lang),navigator.onLine?location.href=e:(j=t.copyMap(H),oe(),U=[],x="",M=null,S=1,ce(!1,!1))}else ne(null)}function be(){var e=document.location.href.split("?")[0],t="?init="+H[55]+","+H[45]+","+H[35]+","+H[25]+","+H[15]+","+H[5]+","+H[44]+","+H[14],n="&log="+ge(U);n+="&lv="+document.querySelector("#level").value,location.href=e+t+n}function Ie(){var e=document.location.href.split("?")[0],t="?init="+H[55]+","+H[45]+","+H[35]+","+H[25]+","+H[15]+","+H[5]+","+H[44]+","+H[14],n="%26log="+ge(U);n+="%26lv="+document.querySelector("#level").value,window.open("https://twitter.com/intent/tweet?text="+e+t+n+"%20%23colamone")}null===K&&((K={}).getItem=function(){},K.setItem=function(){},navigator.cookieEnabled&&(K.hasItem=function(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},K.getItem=function(e){return e&&new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)?unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1")):null},K.setItem=function(e,t){e&&!/^(?:expires|max\-age|path|domain|secure)$/i.test(e)&&(document.cookie=escape(e)+"="+escape(t))}))}((0).self||e.g),document.addEventListener("DOMContentLoaded",(function(){BoardGamejs.init()}))})();
//# sourceMappingURL=main.js.map