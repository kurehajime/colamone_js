/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var e=function(){function e(){}return e.copyMap=function(e){return new Int8Array(e)},e.isEndX=function(t,n){var l=0,r=0;if(t[0]>0&&(l+=t[0]),t[10]>0&&(l+=t[10]),t[20]>0&&(l+=t[20]),t[30]>0&&(l+=t[30]),t[40]>0&&(l+=t[40]),t[50]>0&&(l+=t[50]),-1*t[5]>0&&(r+=t[5]),-1*t[15]>0&&(r+=t[15]),-1*t[25]>0&&(r+=t[25]),-1*t[35]>0&&(r+=t[35]),-1*t[45]>0&&(r+=t[45]),-1*t[55]>0&&(r+=t[55]),l>=8)return 1;if(r<=-8)return-1;if(e.isNoneNode(t))return l>-1*r?1:l<-1*r?-1:0;if(!1===n&&(0!==l||0!==r)){for(var a=0,o=0,i=0;i<=35;i++){var c=0|e.NUMBERS[i];t[c]>0?a+=t[c]:t[c]<0&&(o+=t[c])}if(l>-1*(o+r))return 1;if(-1*r>a+l)return-1}return 0},e.isDraw=function(t){var n=0,l=0;return t[0]>0&&(n+=t[0]),t[10]>0&&(n+=t[10]),t[20]>0&&(n+=t[20]),t[30]>0&&(n+=t[30]),t[40]>0&&(n+=t[40]),t[50]>0&&(n+=t[50]),-1*t[5]>0&&(l-=t[5]),-1*t[15]>0&&(l-=t[15]),-1*t[25]>0&&(l-=t[25]),-1*t[35]>0&&(l-=t[35]),-1*t[45]>0&&(l-=t[45]),-1*t[55]>0&&(l-=t[55]),n===l&&!!e.isNoneNode(t)},e.isNoneNode=function(t){for(var n=!1,l=!1,r=0;r<=35;r++){var a=0|e.NUMBERS[r];if(0!==t[a]&&(!0===e.hasCanMovePanelX(a,t)&&(t[a]>0?n=!0:t[a]<0&&(l=!0)),n&&l))return!1}return!0},e.hasCanMovePanelX=function(t,n){var l=0|n[t],r=~~(t/10),a=~~(t%10);if(l>0&&0===a||l<0&&5===a||0===l)return!1;for(var o=0;o<9;o++)if(0!==e.PIECES[l+8][o]){var i=r+~~(o%3)-1,c=a+~~(o/3)-1;if(!(c<0||c>5||i>5||i<0)){var d=n[10*i+c];if(!(d*l>0||d>0&&0===c||d<0&&5===c))return!0}}return!1},e.getCanMovePanelX=function(t,n){var l=0|n[t],r=~~(t/10),a=~~(t%10),o=[];if(l>0&&0===a||l<0&&5===a||0===l)return o;for(var i=0;i<9;i++)if(0!==e.PIECES[l+8][i]){var c=r+~~(i%3)-1,d=a+~~(i/3)-1;if(!(d<0||d>5||c>5||c<0)){var u=10*c+d,s=0|n[u];s*l>0||s>0&&0===d||s<0&&5===d||o.push(u)}}return o},e.getNodeMap=function(t,n){for(var l=[],r=0;r<=35;r++){var a=0|e.NUMBERS[r];if(!(t[a]*n<=0||0===t[a]))for(var o=e.getCanMovePanelX(a,t),i=0;i<o.length;i++){var c=new Int8Array(t);c[o[i]]=c[a],c[a]=0,l.push([[a,o[i]],c])}}return l},e.evalMap=function(t,n,l){var r=0;if(e.isDraw(t))return 0;var a=e.isEndX(t,n);if(1===a)return 9999999;if(-1===a)return-9999999;for(var o=0;o<=35;o++){var i=0|e.NUMBERS[o],c=0,d=t[i],u=void 0;d>0?(u=5-i%10,c+=l[d][u]):d<0&&(u=i%10,c+=-1*l[-1*d][u]),r+=c}return 0|r},e.deepThinkAllAB=function(t,n,l,r,a,o,i){var c,d=9999999*n*-1;if(0===l)return[c,d=e.evalMap(t,o,i)];void 0!==r&&void 0!==a||(r=9999999*n*-1,a=9999999*n);for(var u=e.getNodeMap(t,n),s=0;s<u.length;s++){var h=u[s][0],v=u[s][1],f=0,g=e.isEndX(v,o);if(g===n)return[h,999999*n];if(g!==-1*n){if(f=e.isNoneNode(v)?0:e.deepThinkAllAB(v,-1*n,l-1,a,r,o,i)[1],void 0===c&&(d=f,c=h),(1===n&&f>d||-1===n&&f<d)&&(d=f,c=h),(1===n&&r<d||-1===n&&r>d)&&(r=d),1===n&&a<=d||-1===n&&a>=d)break}else void 0===c&&(d=999999*n*-1,c=h)}return[c,d]},e.thinkAI=function(t,n,l,r,a,o){var i=!1,c=[void 0,0],d=new Int8Array(t);return o||(o=e.DEFAULT_EVALPARAM),0!==e.isEndX(d,!1)&&(i=!0),(c=e.deepThinkAllAB(d,n,l,r,a,i,o))[1]*n==-999999&&(c=e.deepThinkAllAB(d,n,1,r,a,i,o)),c},e.PIECES=[[0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,1,0],[0,1,0,0,0,0,1,0,1],[1,0,1,0,0,0,1,0,1],[1,0,1,0,0,0,1,1,1],[1,1,1,0,0,0,1,1,1],[1,0,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,1,1],[0,0,0,0,0,0,0,0,0],[1,1,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,0,1],[1,1,1,0,0,0,1,1,1],[1,1,1,0,0,0,1,0,1],[1,0,1,0,0,0,1,0,1],[1,0,1,0,0,0,0,1,0],[0,1,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0]],e.NUMBERS=[0,1,2,3,4,5,10,11,12,13,14,15,20,21,22,23,24,25,30,31,32,33,34,35,40,41,42,43,44,45,50,51,52,53,54,55],e.DEFAULT_EVALPARAM=[[],[1800,1850,1900,1950,2100,2800],[1800,1860,1920,2100,2400,3800],[1450,1520,1590,1900,2350,4450],[1450,1530,1610,2050,2650,5450],[1350,1440,1530,2100,2850,6350],[1350,1450,1550,2250,3150,7350],[1250,1360,1470,2300,3350,8250],[1250,1370,1490,2450,4350,11250]],e}();function t(){}t.init=function(){var t,m,p;Z(),window.innerHeight<window.innerWidth?null===(t=document.querySelector(".manual"))||void 0===t||t.classList.remove("hide"):null===(m=document.querySelector(".manual"))||void 0===m||m.classList.add("hide"),n=null===(p=document.querySelector("#canv"))||void 0===p?void 0:p.getContext("2d"),(a=document.createElement("canvas")).width=H,a.height=H,(o=document.createElement("canvas")).width=H,o.height=H,(i=document.createElement("canvas")).width=H,i.height=H,(c=document.createElement("canvas")).width=H,c.height=H,(d=document.createElement("canvas")).width=H,d.height=H,(u=document.createElement("canvas")).width=H,u.height=H,(s=document.createElement("canvas")).width=H,s.height=H,(h=document.createElement("canvas")).width=H,h.height=H,(v=document.createElement("canvas")).width=H,v.height=H,(f=document.createElement("canvas")).width=H,f.height=H,(g=document.createElement("canvas")).width=H,g.height=H,y=H/6,S=1,q=!0,n.canvas.style.width=H/N+"px",n.canvas.style.height=H/N+"px",n.canvas.width=H,n.canvas.height=H,(l="ontouchstart"in window)?(document.querySelector("#canv").addEventListener("touchstart",ne),document.querySelector("#canv").addEventListener("touchmove",te)):(document.querySelector("#canv").addEventListener("mousemove",ee),document.querySelector("#canv").addEventListener("mouseup",ne)),document.querySelector("#level").addEventListener("change",le),document.querySelector("#prevprev").addEventListener("click",me),document.querySelector("#prev").addEventListener("click",we),document.querySelector("#next").addEventListener("click",pe),document.querySelector("#nextnext").addEventListener("click",ye),document.querySelector("#replay").addEventListener("click",Me),document.querySelector("#tweetlog").addEventListener("click",be),document.querySelector("#newgame").addEventListener("click",Se),document.querySelector("#collapsible").addEventListener("click",(function(){if(document.querySelector(".manual").classList.toggle("hide"),window.innerHeight>window.innerWidth){var e=document.documentElement,t=e.scrollHeight-e.clientHeight;window.scroll(0,t)}})),window.addEventListener("orientationchange",Z),oe(),V.getItem("level_1")||V.setItem("level_1",0),V.getItem("level_2")||V.setItem("level_2",0),V.getItem("level_3")||V.setItem("level_3",0),V.getItem("level_4")||V.setItem("level_4",0),V.getItem("level_5")||V.setItem("level_5",0),void 0!==V.getItem("level_save")&&"undefined"!==V.getItem("level_save")&&null!==V.getItem("level_save")?document.querySelector("#level").value=String(parseInt(V.getItem("level_save"))):(V.setItem("level_save",1),document.querySelector("#level").value=String(1));var M,b,I,x,P,A,T=fe();T.init?(F=function(t){var n;if(t){for(var l in n=e.copyMap(Y))n[l]=0;var r=t.split(",");r.length<8&&(r=["1","2","3","4","5","6","7","8"]);var a=[0,10,20,30,40,50,11,41],o=[55,45,35,25,15,5,44,14];for(var l in o)n[o[l]]=parseInt(r[l]);for(var l in a)n[a[l]]=-1*parseInt(r[l])}return n}(T.init),Y=e.copyMap(F)):F=e.copyMap(Y),T.log&&($=function(t,n){var l=[],r=e.copyMap(n),a={q:0,w:1,e:2,a:3,s:4,d:5,z:6,x:7,c:8},o=(t=(t=(t=t.replace(/q/g,"q,").replace(/w/g,"w,").replace(/e/g,"e,")).replace(/a/g,"a,").replace(/s/g,"s,").replace(/d/g,"d,")).replace(/z/g,"z,").replace(/x/g,"x,").replace(/c/g,"c,")).split(",");l.push(r);for(var i=0;i<o.length;i++)if(""!==o[i]){var c=a[o[i].match(/[qweasdzxc]/)[0]],d=parseInt(o[i].match(/\d*/)[0]),u=10*(Math.floor(d/10)+Math.floor(c%3)-1)+(Math.floor(d%10)+Math.floor(c/3)-1);(r=e.copyMap(r))[u]=r[d],r[d]=0,l.push(r)}return l}(T.log,F)),T.lv&&(document.querySelector("#level").value=String(parseInt(T.lv))),0!==$.length?(document.querySelector("#log").classList.remove("hide"),document.querySelector("#prevprev").classList.remove("hide"),document.querySelector("#prev").classList.remove("hide"),document.querySelector("#next").classList.remove("hide"),document.querySelector("#nextnext").classList.remove("hide"),document.querySelector("#span_replay").classList.add("hide"),document.querySelector("#span_tweetlog").classList.add("hide"),document.querySelector("#next").focus()):(document.querySelector("#log").classList.add("hide"),document.querySelector("#prevprev").classList.add("hide"),document.querySelector("#prev").classList.add("hide"),document.querySelector("#next").classList.add("hide"),document.querySelector("#nextnext").classList.add("hide"),document.querySelector("#span_replay").classList.add("hide"),document.querySelector("#span_tweetlog").classList.add("hide")),J.onload=function(){w=!0,ce(!0,!1)},J.onerror=function(){ce(!0,!1)},0!==J.width&&(w=!0,ce(!0,!1)),setTimeout((function(){0!==J.width&&(w=!0),ce(!0,!1)}),2500),se(),I="script",x="twitter-wjs",A=(b=document).getElementsByTagName(I)[0],b.getElementById(x)||((P=b.createElement(I)).id=x,P.async=!0,P.src="https://platform.twitter.com/widgets.js",A.parentNode.insertBefore(P,A)),0===$.length?0==(-1!=(M=window.navigator.userAgent.toLowerCase()).indexOf("bot")||-1!=M.indexOf("lighthouse")||-1!=M.indexOf("headless"))&&window.setTimeout((function(){1==q&&(C=window.setInterval(K,400),K())}),500):(q=!1,E=!0,L=window.setInterval(Q,1e3)),r=!1,ce(!0,!1)};var n=null,l=!0,r=!1,a=null,o=null,i=null,c=null,d=null,u=null,s=null,h=null,v=null,f=null,g=null,m=!1,w=!1,p=null,y=0,S=0,M=0,b=0,I=null,x="",P=0,q=!0,E=!1,C=null,L=null,A=void 0,T=0,R="#333333",k="#111111",B="#7fed7f",_="#E60073",O="#0099E6",X="#FFFFFF",N=1;void 0!==window.devicePixelRatio&&1!=window.devicePixelRatio&&(N=window.devicePixelRatio);var F,H=500*N,U={1:[1,1,1,1,0,1,1,1,1],2:[1,1,1,1,0,1,1,0,1],3:[1,1,1,0,0,0,1,1,1],4:[1,1,1,0,0,0,1,0,1],5:[1,0,1,0,0,0,1,0,1],6:[1,0,1,0,0,0,0,1,0],7:[0,1,0,0,0,0,0,1,0],8:[0,1,0,0,0,0,0,0,0],"-1":[1,1,1,1,0,1,1,1,1],"-2":[1,0,1,1,0,1,1,1,1],"-3":[1,1,1,0,0,0,1,1,1],"-4":[1,0,1,0,0,0,1,1,1],"-5":[1,0,1,0,0,0,1,0,1],"-6":[0,1,0,0,0,0,1,0,1],"-7":[0,1,0,0,0,0,0,1,0],"-8":[0,0,0,0,0,0,0,1,0]},Y=new Int8Array([-1,0,0,0,0,6,0,0,0,0,-2,-8,0,0,7,5,0,0,0,0,-3,0,0,0,0,4,0,0,0,0,-4,0,0,0,0,3,0,0,0,0,-5,-7,0,0,8,2,0,0,0,0,-6,0,0,0,0,1]),D={},W=0,z=0,G=0,$=[],j=[],J=null;(J=new Image).src="bk.gif";var V=null;try{window==parent&&"localStorage"in window&&null!==window.localStorage&&(V=localStorage).setItem("test",0)}catch(e){V=null}function K(){null!==C&&(Math.random()>.3?re(2):re(1)),T++,ve(),ce(!1,!1),1!==I&&-1!==I&&0!==I||(r=!0,I=null,ce(!1,!1),oe()),T>42&&window.clearInterval(C)}function Q(){null!==L&&1==E?pe():clearInterval(L)}function Z(){var e=document.querySelector("meta[name=viewport]");if(screen.width<500&&screen.height<500?screen.width<screen.height?e.setAttribute("content","width=500,user-scalable=no"):e.setAttribute("content","height=500,user-scalable=no"):screen.width<500?e.setAttribute("content","width=500,user-scalable=no"):screen.height<500&&e.setAttribute("content","height=500,user-scalable=no"),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){var t=screen.width,n=520;0!==Math.abs(window.orientation)&&(t=screen.height,n=900);var l=Math.round(t/n*1e3)/1e3;l==Math.round(l)&&(l+=1e-4),e.setAttribute("content","initial-scale="+l+", minimum-scale="+l+", maximum-scale="+l+", user-scalable=no")}}function ee(e){ie(e),ce(!1,!0)}function te(e){e.preventDefault(),e.stopPropagation()}function ne(t){ie(t);var n=10*Math.floor(W/y)+Math.floor(z/y);if(null!==I||0!==$.length)return Se(),!0;if(!0===q)return q=!1,A=void 0,Y=e.copyMap(F),j=[],ce(!1,!1),I=null,r=!1,S=1,window.clearInterval(C),ce(!1,!1),!0;if(null===p)Y[n]*S>0&&(p=n);else{if(n==p)return p=null,void ce(!1,!1);e.getCanMovePanelX(p,Y).indexOf(n)>=0&&(ce(!1,!0),ae(0,n,S)&&(r=!0,ce(!1,!0),setTimeout((function(){r=!1,ce(!1,!1)}),2e3)),Y[n]=Y[p],Y[p]=0,S*=-1,j.push([p,n]),A=[p,n],p=null,x="thinking...",window.setTimeout((function(){ce(!1,!1)}),50),se(),null===I&&window.setTimeout((function(){re(parseInt(document.querySelector("#level").value)),x="",se(),ce(!1,!1)}),250))}ce(!1,!1)}function le(){var t=document.querySelector("#level").value;V.setItem("level_save",t),V.getItem("level_"+t)>0?document.querySelector("#wins").innerHTML=V.getItem("level_"+t)+" win!":document.querySelector("#wins").innerHTML="",Y=e.copyMap(F),A=void 0,D={},j=[],ce(!1,!1)}function re(t){var n,l,a=new Date,o=function(t){var n=0;for(var l in t)0!==t[l]&&(n+=e.getCanMovePanelX(parseInt(l),t).length);return n}(Y)/2,i=0;switch(t){case 1:o<=7&&i++;break;case 2:o<=8&&i++;break;case 3:o<=10&&i++,o<=6&&i++;break;case 4:o<=11&&i++,o<=7&&i++;break;case 5:case 6:o>16&&i--,o<=12&&i++,o<=8&&i++}n=e.thinkAI(Y,S,t+i+1,void 0,void 0,void 0)[0],A=n,n&&(ae(0,n[1],S)&&(r=!0,ce(!1,!0),setTimeout((function(){r=!1,ce(!1,!1)}),2e3)),Y[n[1]]=Y[n[0]],Y[n[0]]=0,j.push([n[0],n[1]])),S*=-1,l=new Date,P=(l.getTime()-a.getTime())/1e3}function ae(e,t,n){if(n>0){if(t%10==0)return!0}else if(n<0&&t%10==5)return!0;return!1}function oe(){for(var e in Y)Y[e]=0;for(var t=[1,2,3,4,5,6,7,8],n=[0,10,20,30,40,50,11,41],l=[55,45,35,25,15,5,44,14],r=t.length-1;r>=0;r--){var a=Math.floor(Math.random()*(r+1)),o=t[r];t[r]=t[a],t[a]=o}for(var e in l)Y[l[e]]=t[e];for(var e in n)Y[n[e]]=-1*t[e]}function ie(e){var t;if(null!=e){e.clientX||(e=e.touches||e.touches?e.touches[0]:null===(t=event)||void 0===t?void 0:t.touches[0]);var n=e.target.getBoundingClientRect();W=e.clientX-n.left,z=e.clientY-n.top,W*=N,z*=N}}function ce(t,h){var w,P=new Int8Array(Y);if(n.clearRect(0,0,H,H),!1===h&&(m=!1),!1===h||!1===m){n.drawImage(function(e){if(!1===e)return a;var t=a.getContext("2d");t.clearRect(0,0,H,H);var n=t.createLinearGradient(0,0,H,H);n.addColorStop(0,"#888888"),n.addColorStop(.3,"#444444"),n.addColorStop(1,k);for(var l=0;l<6;l++)for(var r=0;r<6;r++)t.strokeStyle=R,0===r?t.fillStyle="#660033":5==r?t.fillStyle="#004466":(l+r)%2==0?t.fillStyle="#FFFFFF":(t.fillStyle=k,t.fillStyle=n),t.beginPath(),t.fillRect(l*y,r*y,y,y),t.strokeRect(l*y,r*y,y,y);return a}(t),0,0,H,H),n.drawImage(function(e){if(!1===e)return o;var t=o.getContext("2d");return t.clearRect(0,0,H,H),t.globalAlpha=.07,t.fillStyle=X,t.beginPath(),t.arc(1*y,-3*y,7*y,0,2*Math.PI,!1),t.fill(),o}(t),0,0,H,H),null!==p&&(P[p]=0),n.drawImage(function(e,t){var n=d.getContext("2d");if(n.clearRect(0,0,H,H),void 0===t)return d;var l,r,a=t[0]/10|0,o=t[0]%10,i=t[1]/10|0,c=t[1]%10,u=y-1*y/5,s=y-1*y/5,h=i*y+y/10,v=c*y+y/10,f=h+s/2,g=v+u/2,m=f,w=g,p=e[t[1]],S=0;if(2!=t.length)return d;if(r=p>0?O:_,a==i||o==c)S=(a+o)%2==0&&0!==o&&5!=o?.5:.3,a<i&&(h=h-s+10,m-=s),a>i&&(h=h+s-10,m+=s),o<c&&(v=v-u+10,w-=u),o>c&&(v=v+u-10,w+=u),(l=n.createLinearGradient(f,g,m,w)).addColorStop(0,r),l.addColorStop(S,r),l.addColorStop(1,"rgba(255, 255, 255, 0)"),n.fillStyle=l,n.fillRect(h,v,u,s);else{S=(a+o)%2==0&&0!==o&&5!=o?.3:.5;var M=[0,0,0,0,0,0,0,0],b=M[0],I=M[1],x=M[2],P=M[3],q=M[4],E=M[5],C=M[6],L=M[7];a<i&&o<c&&(b=h,I=v-u,x=h+s,P=v,q=h,E=v+u,C=h-s,L=v,m-=s,w-=u,f+=2*s,g+=2*u),a>i&&o>c&&(b=h+s,I=v,x=h+s+s,P=v+u,q=h+s,E=v+u+u,C=h,L=v+u,m+=s,w+=u,f-=2*s,g-=2*u),a<i&&o>c&&(b=h,I=v,x=h+s,P=v+u,q=h,E=v+u+u,C=h-s,L=v+u,m-=s,w+=u,f+=2*s,g-=2*u),a>i&&o<c&&(b=h+s,I=v-u,x=h+s+s,P=v,q=h+s,E=v+u,C=h,L=v,m+=s,w-=u,f-=2*s,g+=2*u),n.beginPath(),n.moveTo(b,I),n.lineTo(x,P),n.lineTo(q,E),n.lineTo(C,L),n.lineTo(b,I),n.closePath(),(l=n.createLinearGradient(f,g,m,w)).addColorStop(0,r),l.addColorStop(S,r),l.addColorStop(.97,"rgba(255, 255, 255, 0)"),n.fillStyle=l,n.fill()}return d}(P,A),0,0,H,H),n.drawImage(function(e){var t=c.getContext("2d");t.clearRect(0,0,H,H);for(var n=0;n<6;n++)for(var l=0;l<6;l++)if(0!==e[10*n+l]){var r=!1;(e[10*n+l]>0&&0===l||e[10*n+l]<0&&5==l)&&(r=!0),t=de(t,n*y,l*y,e[10*n+l],r)}return c}(P),0,0,H,H);var C=g.getContext("2d");C.clearRect(0,0,H,H),C.drawImage(n.canvas,0,0,H,H),m=!0}else n.drawImage(g,0,0,H,H);n.drawImage(((w=u.getContext("2d")).clearRect(0,0,H,H),null!==p&&de(w,W-y/2,z-y/2,Y[p],!1),u),0,0,H,H),0===W&&0===z||!1!==q||n.drawImage(function(){var t=W-W%y,n=z-z%y,r=i.getContext("2d"),a=r.createRadialGradient(t,n,0,t,n,y);if(a.addColorStop(.3,B),a.addColorStop(1,"#148d14"),r.clearRect(0,0,H,H),r.globalAlpha=.35,r.fillStyle=a,r.lineWidth=1,r.beginPath(),r.fillRect(t,n,y,y),!0===l&&null===p)return i;var o=t/y*10+n/y;if(Y[o]*S>0)for(var c=e.getCanMovePanelX(o,Y),d=0;d<=c.length-1;d++)t=Math.floor(c[d]/10),n=Math.floor(c[d]%10),r.globalAlpha=.6,r.strokeStyle=B,r.lineWidth=y/20,r.beginPath(),r.arc(t*y+y/2,n*y+y/2,y/2-y/10,0,2*Math.PI,!1),r.stroke();return i}(),0,0,H,H),(r||null!==I)&&!1===q&&0==E&&n.drawImage(function(){var e=f.getContext("2d"),t="",n=Math.round(1.5*y),l="#0099E6",r="#E60073";return e.clearRect(0,0,H,H),e.globalAlpha=.4,e.textBaseline="middle",e.textAlign="center",e.shadowBlur=10,e.shadowColor="rgba(0, 0, 0, 0.5)",e.font="bold "+n+"px Play,sans-serif",e.globalAlpha=.3,e.shadowBlur=2,e.shadowColor="rgba(255, 255, 255, 1)",e.fillStyle=r,t=String(b),e.beginPath(),e.fillText(t,1*y,3.8*y),t="8",e.beginPath(),e.fillText(t,2*y,5.3*y),e.lineWidth=.2*y,e.strokeStyle=r,e.beginPath(),e.moveTo(.4*y,5.55*y),e.lineTo(2.6*y,3.55*y),e.closePath(),e.stroke(),t=String(M),e.fillStyle=l,e.beginPath(),e.fillText(t,4*y,.7*y),t="8",e.beginPath(),e.fillText(t,5*y,2.3*y),e.lineWidth=.2*y,e.strokeStyle=l,e.beginPath(),e.moveTo(3.4*y,2.55*y),e.lineTo(5.6*y,.55*y),e.closePath(),e.stroke(),f}(),0,0,H,H),n.drawImage(function(){var e=s.getContext("2d"),t=1.3*y,n=2.5*y;if(e.clearRect(0,0,H,H),""===x)return s;e.shadowBlur=10,e.shadowColor="rgba(100, 100, 100, 0.5)",e.shadowOffsetX=5,e.shadowOffsetY=5,e.globalAlpha=.9,e.fillStyle=X,ue(e,t,n,3.4*y,1*y,y/20);var l=Math.round(.36*y);return e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowColor="rgba(0, 0, 0, 0)",e.font="bold "+l+"px Play,sans-serif",e.globalAlpha=1,e.fillStyle=R,e.textBaseline="middle",e.textAlign="center",e.beginPath(),e.fillText(x,3*y,3*y),s}(),0,0,H,H),!0===q&&n.drawImage(function(){var e=v.getContext("2d");e.clearRect(0,0,H,H),e.globalAlpha=.5,e.fillStyle="#000000",e.fillRect(0,0,H,H);var t=2*y,n=3.5*y;e.shadowBlur=20,e.shadowColor="rgba(0, 0, 0, 0.3)",e.shadowOffsetX=5,e.shadowOffsetY=5,e.globalAlpha=.8,e.fillStyle=X,e.beginPath(),ue(e,t,n,2*y,1*y,y/20),e.shadowColor="rgba(0, 0, 0, 0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;var l=Math.round(.5*y),r="Play";return r+=T%10==0?" ":"",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowColor="rgba(0, 0, 0, 0)",e.font="bold "+l+"px Play,sans-serif",e.globalAlpha=1,e.fillStyle=R,e.textBaseline="middle",e.textAlign="center",e.beginPath(),e.fillText(r,3*y,4*y),r="colamone",l=Math.round(1*y),e.font="bold "+l+"px Play,sans-serif",e.fillStyle=X,e.shadowBlur=0,e.beginPath(),e.fillText(r,3*y,2*y),v}(),0,0,H,H)}function de(e,t,l,r,a){var o;if(0===r)return e;o=r>0?O:_;var i,c=n.createLinearGradient(t,l,t+y,l+y);c.addColorStop(0,"rgb(255, 255, 255)"),c.addColorStop(.4,o),c.addColorStop(1,o),e.shadowBlur=10,e.shadowColor="rgba(0, 0, 0, 1)",e.shadowOffsetX=2,e.shadowOffsetY=2,e.fillStyle=c,e.beginPath(),ue(e,t+y/10,l+y/10,y-1*y/5,y-1*y/5,y/20),e.shadowColor="rgba(0, 0, 0, 0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,w&&(e.globalAlpha=.35,e.save(),e.clip(),e.drawImage((i=h.getContext("2d"),w&&i.drawImage(J,0,0,H/N,H/N,0,0,H,H),h),t+y/10,l+y/10,y-1*y/5,y-1*y/5),e.restore(),e.globalAlpha=1),e.fillStyle=X;var d=Math.round(.18*y);e.textBaseline="middle",e.textAlign="center",e.font=d+"pt 'Play',Arial",e.beginPath(),e.fillText(String(Math.abs(r)),t+y/2,l+y/2);for(var u=0;u<=U[r].length-1;u++)if(0!==U[r][u]){var s=t+y/4.16+Math.floor(y-1*y/5)/3*Math.floor(u%3),v=l+y/4.16+Math.floor(y-1*y/5)/3*Math.floor(u/3);e.fillStyle=X,e.beginPath(),e.arc(s,v,.06*y,0,2*Math.PI,!1),e.fill()}return a&&(e.shadowBlur=10,e.shadowColor="rgba(0, 0, 0, 1)",e.globalAlpha=1,e.fillStyle=X,d=Math.round(.5*y),e.textBaseline="middle",e.textAlign="center",e.font="bolder "+d+"pt Play,Arial ",e.beginPath(),e.fillText(String(Math.abs(r)),t+y/2,l+y/2),e.globalAlpha=1,e.shadowColor="rgba(0, 0, 0, 0)",e.shadowBlur=0),e}function ue(e,t,n,l,r,a){e.beginPath(),e.moveTo(t+a,n),e.lineTo(t+l-a,n),e.arc(t+l-a,n+a,a,1.5*Math.PI,0,!1),e.lineTo(t+l,n+r-a),e.arc(t+l-a,n+r-a,a,0,.5*Math.PI,!1),e.lineTo(t+a,n+r),e.arc(t+a,n+r-a,a,.5*Math.PI,Math.PI,!1),e.lineTo(t,n+a),e.arc(t+a,n+a,a,Math.PI,1.5*Math.PI,!1),e.closePath(),e.fill()}function se(){ve(),document.querySelector("#blue").innerHTML="Blue: "+M+"/8",document.querySelector("#red").innerHTML=" Red: "+b+"/8",document.querySelector("#time").innerHTML="("+P.toFixed(3)+"sec)",0===$.length&&(1==I?(x="You win!",V.setItem("level_"+document.querySelector("#level").value,parseInt(V.getItem("level_"+document.querySelector("#level").value))+1),he()):-1==I?(x="You lose...",V.setItem("level_"+document.querySelector("#level").value,0),he()):0===I&&(x=D[JSON.stringify(Y)]>=3?"3fold repetition":"-- Draw --",he())),V.getItem("level_"+document.querySelector("#level").value)>0?document.querySelector("#wins").innerHTML=V.getItem("level_"+document.querySelector("#level").value)+" win!":document.querySelector("#wins").innerHTML=""}function he(){0===$.length&&(document.querySelector("#span_replay").classList.remove("hide"),document.querySelector("#span_tweetlog").classList.remove("hide"))}function ve(){var t,n,l=0,r=0,a=[0,10,20,30,40,50],o=[5,15,25,35,45,55];for(var i in a)1*Y[a[i]]>0&&(l+=Y[a[i]]);for(var i in o)-1*Y[o[i]]>0&&(r+=Y[o[i]]);l>=8?I=1:r<=-8&&(I=-1),function(t){var n=!1,l=!1;for(var r in t)if(0!==t[r]&&(0!==e.getCanMovePanelX(parseInt(r),t).length&&(t[r]>0?n=!0:t[r]<0&&(l=!0)),n&&l))return!1;return!0}(Y)?Math.abs(l)>Math.abs(r)?I=1:Math.abs(l)<Math.abs(r)?I=-1:Math.abs(l)==Math.abs(r)&&(I=0):!0==(t=Y,n=JSON.stringify(t),void 0===D[n]?(D[n]=1,!1):(D[n]+=1,D[n]>=3))&&(I=0),M=Math.abs(l),b=Math.abs(r)}function fe(){var e={};if(1<document.location.search.length)for(var t=document.location.search.substring(1).split("&"),n=0;n<t.length;n++){var l=t[n].split("="),r=decodeURIComponent(l[0]),a=decodeURIComponent(l[1]);e[r]=decodeURIComponent(a)}return e}function ge(e){var t="";for(var n in e){var l=e[n][0],r=e[n][1],a=Math.floor(r/10)-Math.floor(l/10),o=Math.floor(r%10)-Math.floor(l%10),i="";-1===a&&-1===o&&(i="q"),0===a&&-1===o&&(i="w"),1===a&&-1===o&&(i="e"),-1===a&&0===o&&(i="a"),0===a&&0===o&&(i="s"),1===a&&0===o&&(i="d"),-1===a&&1===o&&(i="z"),0===a&&1===o&&(i="x"),1===a&&1===o&&(i="c"),t+=l+i}return t}function me(){G=0,E=!1,Y=e.copyMap($[G]),I=null,r=!1,se(),ce(!1,!1)}function we(){G<=0||(E=!1,G-=1,Y=e.copyMap($[G]),I=null,r=!1,se(),ce(!1,!1))}function pe(){G+1>$.length-1||(G+=1,Y=e.copyMap($[G]),se(),ce(!1,!1))}function ye(){G=$.length-1,E=!1,Y=e.copyMap($[G]),se(),ce(!1,!1)}function Se(){var t=document.location.href.split("?")[0];if(!0!==q){var n=fe();n.lang&&(t+="?lang="+n.lang),navigator.onLine?location.href=t:(Y=e.copyMap(F),oe(),j=[],x="",I=null,S=1,ce(!1,!1))}else ne(null)}function Me(){var e=document.location.href.split("?")[0],t="?init="+F[55]+","+F[45]+","+F[35]+","+F[25]+","+F[15]+","+F[5]+","+F[44]+","+F[14],n="&log="+ge(j);n+="&lv="+document.querySelector("#level").value,location.href=e+t+n}function be(){var e=document.location.href.split("?")[0],t="?init="+F[55]+","+F[45]+","+F[35]+","+F[25]+","+F[15]+","+F[5]+","+F[44]+","+F[14],n="%26log="+ge(j);n+="%26lv="+document.querySelector("#level").value,window.open("https://twitter.com/intent/tweet?text="+e+t+n+"%20%23colamone")}null===V&&((V={}).getItem=function(){},V.setItem=function(){},navigator.cookieEnabled&&(V.hasItem=function(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},V.getItem=function(e){return e&&new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)?unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1")):null},V.setItem=function(e,t){e&&!/^(?:expires|max\-age|path|domain|secure)$/i.test(e)&&(document.cookie=escape(e)+"="+escape(t))})),document.addEventListener("DOMContentLoaded",(function(){t.init()}))})();
//# sourceMappingURL=main.js.map