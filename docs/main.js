/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var t=function(){function e(){}return e.copyMap=function(e){return new Int8Array(e)},e.isEndX=function(t,n){var l=0,o=0;if(t[0]>0&&(l+=t[0]),t[10]>0&&(l+=t[10]),t[20]>0&&(l+=t[20]),t[30]>0&&(l+=t[30]),t[40]>0&&(l+=t[40]),t[50]>0&&(l+=t[50]),-1*t[5]>0&&(o+=t[5]),-1*t[15]>0&&(o+=t[15]),-1*t[25]>0&&(o+=t[25]),-1*t[35]>0&&(o+=t[35]),-1*t[45]>0&&(o+=t[45]),-1*t[55]>0&&(o+=t[55]),l>=8)return 1;if(o<=-8)return-1;if(e.isNoneNode(t))return l>-1*o?1:l<-1*o?-1:0;if(!1===n&&(0!==l||0!==o)){for(var r=0,a=0,i=0;i<=35;i++){var c=0|e.NUMBERS[i];t[c]>0?r+=t[c]:t[c]<0&&(a+=t[c])}if(l>-1*(a+o))return 1;if(-1*o>r+l)return-1}return 0},e.isDraw=function(t){var n=0,l=0;return t[0]>0&&(n+=t[0]),t[10]>0&&(n+=t[10]),t[20]>0&&(n+=t[20]),t[30]>0&&(n+=t[30]),t[40]>0&&(n+=t[40]),t[50]>0&&(n+=t[50]),-1*t[5]>0&&(l-=t[5]),-1*t[15]>0&&(l-=t[15]),-1*t[25]>0&&(l-=t[25]),-1*t[35]>0&&(l-=t[35]),-1*t[45]>0&&(l-=t[45]),-1*t[55]>0&&(l-=t[55]),n===l&&!!e.isNoneNode(t)},e.isNoneNode=function(t){for(var n=!1,l=!1,o=0;o<=35;o++){var r=0|e.NUMBERS[o];if(0!==t[r]&&(!0===e.hasCanMovePanelX(r,t)&&(t[r]>0?n=!0:t[r]<0&&(l=!0)),n&&l))return!1}return!0},e.hasCanMovePanelX=function(t,n){var l=0|n[t],o=~~(t/10),r=~~(t%10);if(l>0&&0===r||l<0&&5===r||0===l)return!1;for(var a=0;a<9;a++)if(0!==e.PIECES[l+8][a]){var i=o+~~(a%3)-1,c=r+~~(a/3)-1;if(!(c<0||c>5||i>5||i<0)){var u=n[10*i+c];if(!(u*l>0||u>0&&0===c||u<0&&5===c))return!0}}return!1},e.getCanMovePanelX=function(t,n){var l=0|n[t],o=~~(t/10),r=~~(t%10),a=[];if(l>0&&0===r||l<0&&5===r||0===l)return a;for(var i=0;i<9;i++)if(0!==e.PIECES[l+8][i]){var c=o+~~(i%3)-1,u=r+~~(i/3)-1;if(!(u<0||u>5||c>5||c<0)){var d=10*c+u,s=0|n[d];s*l>0||s>0&&0===u||s<0&&5===u||a.push(d)}}return a},e.getNodeMap=function(t,n){for(var l=[],o=0;o<=35;o++){var r=0|e.NUMBERS[o];if(!(t[r]*n<=0||0===t[r]))for(var a=e.getCanMovePanelX(r,t),i=0;i<a.length;i++){var c=new Int8Array(t);c[a[i]]=c[r],c[r]=0,l.push([[r,a[i]],c])}}return l},e.evalMap=function(t,n,l){var o=0;if(e.isDraw(t))return 0;var r=e.isEndX(t,n);if(1===r)return 9999999;if(-1===r)return-9999999;for(var a=0;a<=35;a++){var i=0|e.NUMBERS[a],c=0,u=t[i],d=void 0;u>0?(d=5-i%10,c+=l[u][d]):u<0&&(d=i%10,c+=-1*l[-1*u][d]),o+=c}return 0|o},e.deepThinkAllAB=function(t,n,l,o,r,a,i){var c,u=9999999*n*-1;if(0===l)return[c,u=e.evalMap(t,a,i)];void 0!==o&&void 0!==r||(o=9999999*n*-1,r=9999999*n);for(var d=e.getNodeMap(t,n),s=0;s<d.length;s++){var h=d[s][0],f=d[s][1],g=0,m=e.isEndX(f,a);if(m===n)return[h,999999*n];if(m!==-1*n){if(g=e.isNoneNode(f)?0:e.deepThinkAllAB(f,-1*n,l-1,r,o,a,i)[1],void 0===c&&(u=g,c=h),(1===n&&g>u||-1===n&&g<u)&&(u=g,c=h),(1===n&&o<u||-1===n&&o>u)&&(o=u),1===n&&r<=u||-1===n&&r>=u)break}else void 0===c&&(u=999999*n*-1,c=h)}return[c,u]},e.thinkAI=function(t,n,l,o,r,a){var i=!1,c=[void 0,0],u=new Int8Array(t);return a||(a=e.DEFAULT_EVALPARAM),0!==e.isEndX(u,!1)&&(i=!0),(c=e.deepThinkAllAB(u,n,l,o,r,i,a))[1]*n==-999999&&(c=e.deepThinkAllAB(u,n,1,o,r,i,a)),c},e.PIECES=[[0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,1,0],[0,1,0,0,0,0,1,0,1],[1,0,1,0,0,0,1,0,1],[1,0,1,0,0,0,1,1,1],[1,1,1,0,0,0,1,1,1],[1,0,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,1,1],[0,0,0,0,0,0,0,0,0],[1,1,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,0,1],[1,1,1,0,0,0,1,1,1],[1,1,1,0,0,0,1,0,1],[1,0,1,0,0,0,1,0,1],[1,0,1,0,0,0,0,1,0],[0,1,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0]],e.NUMBERS=[0,1,2,3,4,5,10,11,12,13,14,15,20,21,22,23,24,25,30,31,32,33,34,35,40,41,42,43,44,45,50,51,52,53,54,55],e.DEFAULT_EVALPARAM=[[],[1800,1850,1900,1950,2100,2800],[1800,1860,1920,2100,2400,3800],[1450,1520,1590,1900,2350,4450],[1450,1530,1610,2050,2650,5450],[1350,1440,1530,2100,2850,6350],[1350,1450,1550,2250,3150,7350],[1250,1360,1470,2300,3350,8250],[1250,1370,1490,2450,4350,11250]],e}();!function(e){e.BoardGamejs=function(){},e.BoardGamejs.init=function(){Z(),window.innerHeight<window.innerWidth?document.querySelector(".manual").classList.remove("hide"):document.querySelector(".manual").classList.add("hide"),n=document.querySelector("#canv").getContext("2d"),r=document.createElement("canvas"),r.width=F,r.height=F,a=document.createElement("canvas"),a.width=F,a.height=F,i=document.createElement("canvas"),i.width=F,i.height=F,c=document.createElement("canvas"),c.width=F,c.height=F,u=document.createElement("canvas"),u.width=F,u.height=F,d=document.createElement("canvas"),d.width=F,d.height=F,s=document.createElement("canvas"),s.width=F,s.height=F,h=document.createElement("canvas"),h.width=F,h.height=F,f=document.createElement("canvas"),f.width=F,f.height=F,g=document.createElement("canvas"),g.width=F,g.height=F,m=document.createElement("canvas"),m.width=F,m.height=F,y=F/6,S=1,q=!0,n.canvas.style.width=F/N+"px",n.canvas.style.height=F/N+"px",n.canvas.width=F,n.canvas.height=F,l="ontouchstart"in window,l?(document.querySelector("#canv").addEventListener("touchstart",ne),document.querySelector("#canv").addEventListener("touchmove",te)):(document.querySelector("#canv").addEventListener("mousemove",ee),document.querySelector("#canv").addEventListener("mouseup",ne)),document.querySelector("#level").addEventListener("change",le),document.querySelector("#prevprev").addEventListener("click",ve),document.querySelector("#prev").addEventListener("click",we),document.querySelector("#next").addEventListener("click",pe),document.querySelector("#nextnext").addEventListener("click",ye),document.querySelector("#replay").addEventListener("click",be),document.querySelector("#tweetlog").addEventListener("click",Me),document.querySelector("#newgame").addEventListener("click",Se),document.querySelector("#collapsible").addEventListener("click",(function(){if(document.querySelector(".manual").classList.toggle("hide"),window.innerHeight>window.innerWidth){var e=document.documentElement,t=e.scrollHeight-e.clientHeight;window.scroll(0,t)}})),window.addEventListener("orientationchange",Z),ae(),V.getItem("level_1")||V.setItem("level_1",0),V.getItem("level_2")||V.setItem("level_2",0),V.getItem("level_3")||V.setItem("level_3",0),V.getItem("level_4")||V.setItem("level_4",0),V.getItem("level_5")||V.setItem("level_5",0),void 0!==V.getItem("level_save")&&"undefined"!==V.getItem("level_save")&&null!==V.getItem("level_save")?document.querySelector("#level").value=parseInt(V.getItem("level_save")):(V.setItem("level_save",1),document.querySelector("#level").value=1);let e=ge();e.init?(U=function(e){let n;if(e){n=t.copyMap(Y);for(let e in n)n[e]=0;let l=e.split(",");l.length<8&&(l=[1,2,3,4,5,6,7,8]);let o=[0,10,20,30,40,50,11,41],r=[55,45,35,25,15,5,44,14];for(let e in r)n[r[e]]=parseInt(l[e]);for(let e in o)n[o[e]]=-1*parseInt(l[e])}return n}(e.init),Y=t.copyMap(U)):U=t.copyMap(Y),e.log&&(z=function(e,n){let l=[],o=t.copyMap(n),r={q:0,w:1,e:2,a:3,s:4,d:5,z:6,x:7,c:8},a=(e=(e=(e=e.replace(/q/g,"q,").replace(/w/g,"w,").replace(/e/g,"e,")).replace(/a/g,"a,").replace(/s/g,"s,").replace(/d/g,"d,")).replace(/z/g,"z,").replace(/x/g,"x,").replace(/c/g,"c,")).split(",");l.push(o);for(let e=0;e<a.length;e++){if(""===a[e])continue;let n=r[a[e].match(/[qweasdzxc]/)[0]],i=parseInt(a[e].match(/\d*/)[0]),c=10*(Math.floor(i/10)+Math.floor(n%3)-1)+(Math.floor(i%10)+Math.floor(n/3)-1);o=t.copyMap(o),o[c]=parseInt(o[i]),o[i]=0,l.push(o)}return l}(e.log,U)),e.lv&&(document.querySelector("#level").value=parseInt(e.lv)),0!==z.length?(document.querySelector("#log").classList.remove("hide"),document.querySelector("#prevprev").classList.remove("hide"),document.querySelector("#prev").classList.remove("hide"),document.querySelector("#next").classList.remove("hide"),document.querySelector("#nextnext").classList.remove("hide"),document.querySelector("#span_replay").classList.add("hide"),document.querySelector("#span_tweetlog").classList.add("hide"),document.querySelector("#next").focus()):(document.querySelector("#log").classList.add("hide"),document.querySelector("#prevprev").classList.add("hide"),document.querySelector("#prev").classList.add("hide"),document.querySelector("#next").classList.add("hide"),document.querySelector("#nextnext").classList.add("hide"),document.querySelector("#span_replay").classList.add("hide"),document.querySelector("#span_tweetlog").classList.add("hide")),J.onload=function(){w=!0,ce(!0,!1)},J.onerror=function(){ce(!0,!1)},0!==J.width&&(w=!0,ce(!0,!1)),setTimeout((function(){0!==J.width&&(w=!0),ce(!0,!1)}),2500),se(),function(e,t,n){let l,o=e.getElementsByTagName(t)[0];e.getElementById(n)||(l=e.createElement(t),l.id=n,l.async=!0,l.src="https://platform.twitter.com/widgets.js",o.parentNode.insertBefore(l,o))}(document,"script","twitter-wjs"),0===z.length?0==function(){let e=window.navigator.userAgent.toLowerCase();return-1!=e.indexOf("bot")||-1!=e.indexOf("lighthouse")||-1!=e.indexOf("headless")}()&&window.setTimeout((function(){1==q&&(C=window.setInterval(K,400),K())}),500):(q=!1,E=!0,L=window.setInterval(Q,1e3)),o=!1,ce(!0,!1)};let n=null,l=!0,o=!1,r=null,a=null,i=null,c=null,u=null,d=null,s=null,h=null,f=null,g=null,m=null,v=!1,w=!1,p=null,y=null,S=null,b=0,M=0,I=null,x="",P=0,q=!0,E=!1,C=null,L=null,A=[],T=0;const R="#333333",k="#111111",B="#7fed7f",_="#E60073",O="#0099E6",X="#FFFFFF";let N=1;void 0!==window.devicePixelRatio&&1!=window.devicePixelRatio&&(N=window.devicePixelRatio);let F=500*N;const H={1:[1,1,1,1,0,1,1,1,1],2:[1,1,1,1,0,1,1,0,1],3:[1,1,1,0,0,0,1,1,1],4:[1,1,1,0,0,0,1,0,1],5:[1,0,1,0,0,0,1,0,1],6:[1,0,1,0,0,0,0,1,0],7:[0,1,0,0,0,0,0,1,0],8:[0,1,0,0,0,0,0,0,0],"-1":[1,1,1,1,0,1,1,1,1],"-2":[1,0,1,1,0,1,1,1,1],"-3":[1,1,1,0,0,0,1,1,1],"-4":[1,0,1,0,0,0,1,1,1],"-5":[1,0,1,0,0,0,1,0,1],"-6":[0,1,0,0,0,0,1,0,1],"-7":[0,1,0,0,0,0,0,1,0],"-8":[0,0,0,0,0,0,0,1,0]};let U,Y=[-1,0,0,0,0,6,0,0,0,0,-2,-8,0,0,7,5,0,0,0,0,-3,0,0,0,0,4,0,0,0,0,-4,0,0,0,0,3,0,0,0,0,-5,-7,0,0,8,2,0,0,0,0,-6,0,0,0,0,1],D={},G=0,j=0,W=0,z=[],$=[],J=null;J=new Image,J.src="bk.gif";let V=null;try{window==parent&&"localStorage"in window&&null!==window.localStorage&&(V=localStorage,V.setItem("test",0))}catch(e){V=null}function K(){null!==C&&(Math.random()>.3?oe(2):oe(1)),T++,fe(),ce(!1,!1),1!==I&&-1!==I&&0!==I||(o=!0,I=null,ce(!1,!1),ae()),T>42&&window.clearInterval(C)}function Q(){null!==L&&1==E?pe():clearInterval(L)}function Z(){let e=document.querySelector("meta[name=viewport]");if(screen.width<500&&screen.height<500?screen.width<screen.height?e.setAttribute("content","width=500,user-scalable=no"):e.setAttribute("content","height=500,user-scalable=no"):screen.width<500?e.setAttribute("content","width=500,user-scalable=no"):screen.height<500&&e.setAttribute("content","height=500,user-scalable=no"),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){let t=screen.width,n=520;0!==Math.abs(window.orientation)&&(t=screen.height,n=900);let l=Math.round(t/n*1e3)/1e3;l==Math.round(l)&&(l+=1e-4),e.setAttribute("content","initial-scale="+l+", minimum-scale="+l+", maximum-scale="+l+", user-scalable=no")}}function ee(e){ie(e),ce(!1,!0)}function te(e){e.preventDefault(),e.stopPropagation()}function ne(e){ie(e);let n=10*Math.floor(G/y)+Math.floor(j/y);if(null!==I||0!==z.length)return Se(),!0;if(!0===q)return q=!1,A=[],Y=t.copyMap(U),$=[],ce(!1,!1),I=null,o=!1,S=1,window.clearInterval(C),ce(!1,!1),!0;if(null===p)Y[n]*S>0&&(p=n);else{if(n==p)return p=null,void ce(!1,!1);t.getCanMovePanelX(p,Y).indexOf(n)>=0&&(ce(!1,!0),re(0,n,S)&&(o=!0,ce(!1,!0),setTimeout((function(){o=!1,ce(!1,!1)}),2e3)),Y[n]=Y[p],Y[p]=0,S*=-1,$.push([p,n]),A=[p,n],p=null,x="thinking...",window.setTimeout((function(){ce(!1,!1)}),50),se(),null===I&&window.setTimeout((function(){oe(document.querySelector("#level").value),x="",se(),ce(!1,!1)}),250))}ce(!1,!1)}function le(){let e=document.querySelector("#level").value;V.setItem("level_save",e),V.getItem("level_"+e)>0?document.querySelector("#wins").innerHTML=V.getItem("level_"+e)+" win!":document.querySelector("#wins").innerHTML="",Y=t.copyMap(U),A=[],D={},$=[],ce(!1,!1)}function oe(e){let n,l,r=new Date,a=function(e){let n=0;for(let l in e)0!==e[l]&&(n+=t.getCanMovePanelX(l,e).length);return n}(Y)/2,i=0;switch(e=parseInt(e)){case 1:a<=7&&i++;break;case 2:a<=8&&i++;break;case 3:a<=10&&i++,a<=6&&i++;break;case 4:a<=11&&i++,a<=7&&i++;break;case 5:case 6:a>16&&i--,a<=12&&i++,a<=8&&i++}n=t.thinkAI(Y,S,e+i+1)[0],A=n,n&&(re(0,n[1],S)&&(o=!0,ce(!1,!0),setTimeout((function(){o=!1,ce(!1,!1)}),2e3)),Y[n[1]]=Y[n[0]],Y[n[0]]=0,$.push([n[0],n[1]])),S*=-1,l=new Date,P=(l-r)/1e3}function re(e,t,n){if(n>0){if(t%10==0)return!0}else if(n<0&&t%10==5)return!0;return!1}function ae(){for(let e in Y)Y[e]=0;let e=[1,2,3,4,5,6,7,8],t=[0,10,20,30,40,50,11,41],n=[55,45,35,25,15,5,44,14];for(let t=e.length-1;t>=0;t--){let n=Math.floor(Math.random()*(t+1)),l=e[t];e[t]=e[n],e[n]=l}for(let t in n)Y[n[t]]=e[t];for(let n in t)Y[t[n]]=-1*e[n]}function ie(e){if(null==e)return;e.clientX||(e=e.touches||e.touches?e.touches[0]:event.touches[0]);let t=e.target.getBoundingClientRect();G=e.clientX-t.left,j=e.clientY-t.top,G*=N,j*=N}function ce(e,h){let w=new Int8Array(Y);if(n.clearRect(0,0,F,F),!1===h&&(v=!1),!1===h||!1===v){n.drawImage(function(e){if(!1===e)return r;let t=r.getContext("2d");t.clearRect(0,0,F,F);let n=t.createLinearGradient(0,0,F,F);n.addColorStop(0,"#888888"),n.addColorStop(.3,"#444444"),n.addColorStop(1,k);for(let e=0;e<6;e++)for(let l=0;l<6;l++)t.strokeStyle=R,0===l?t.fillStyle="#660033":5==l?t.fillStyle="#004466":(e+l)%2==0?t.fillStyle="#FFFFFF":(t.fillStyle=k,t.fillStyle=n),t.beginPath(),t.fillRect(e*y,l*y,y,y),t.strokeRect(e*y,l*y,y,y);return r}(e),0,0,F,F),n.drawImage(function(e){if(!1===e)return a;let t=a.getContext("2d");return t.clearRect(0,0,F,F),t.globalAlpha=.07,t.fillStyle=X,t.beginPath(),t.arc(1*y,-3*y,7*y,0,2*Math.PI,!1),t.fill(),a}(e),0,0,F,F),null!==p&&(w[p]=0),n.drawImage(function(e,t){let n=u.getContext("2d");n.clearRect(0,0,F,F);let l,o=t[0]/10|0,r=t[0]%10,a=t[1]/10|0,i=t[1]%10,c=y-1*y/5,d=y-1*y/5,s=a*y+y/10,h=i*y+y/10,f=s+d/2,g=h+c/2,m=f,v=g,w=e[t[1]],p="",S=0;if(2!=t.length)return u;if(p=w>0?O:_,o==a||r==i)S=(o+r)%2==0&&0!==r&&5!=r?.5:.3,o<a&&(s=s-d+10,m-=d),o>a&&(s=s+d-10,m+=d),r<i&&(h=h-c+10,v-=c),r>i&&(h=h+c-10,v+=c),l=n.createLinearGradient(f,g,m,v),l.addColorStop(0,p),l.addColorStop(S,p),l.addColorStop(1,"rgba(255, 255, 255, 0)"),n.fillStyle=l,n.fillRect(s,h,c,d);else{let e,t,u,w,y,b,M,I;S=(o+r)%2==0&&0!==r&&5!=r?.3:.5,o<a&&r<i&&(e=s,t=h-c,u=s+d,w=h,y=s,b=h+c,M=s-d,I=h,m-=d,v-=c,f+=2*d,g+=2*c),o>a&&r>i&&(e=s+d,t=h,u=s+d+d,w=h+c,y=s+d,b=h+c+c,M=s,I=h+c,m+=d,v+=c,f-=2*d,g-=2*c),o<a&&r>i&&(e=s,t=h,u=s+d,w=h+c,y=s,b=h+c+c,M=s-d,I=h+c,m-=d,v+=c,f+=2*d,g-=2*c),o>a&&r<i&&(e=s+d,t=h-c,u=s+d+d,w=h,y=s+d,b=h+c,M=s,I=h,m+=d,v-=c,f-=2*d,g+=2*c),n.beginPath(),n.moveTo(e,t),n.lineTo(u,w),n.lineTo(y,b),n.lineTo(M,I),n.lineTo(e,t),n.closePath(),l=n.createLinearGradient(f,g,m,v),l.addColorStop(0,p),l.addColorStop(S,p),l.addColorStop(.97,"rgba(255, 255, 255, 0)"),n.fillStyle=l,n.fill()}return u}(w,A),0,0,F,F),n.drawImage(function(e){let t=c.getContext("2d");t.clearRect(0,0,F,F);for(let n=0;n<6;n++)for(let l=0;l<6;l++)if(0!==e[10*n+l]){let o=!1;(e[10*n+l]>0&&0===l||e[10*n+l]<0&&5==l)&&(o=!0),t=ue(t,n*y,l*y,e[10*n+l],o)}return c}(w),0,0,F,F);let t=m.getContext("2d");t.clearRect(0,0,F,F),t.drawImage(n.canvas,0,0,F,F),v=!0}else n.drawImage(m,0,0,F,F);n.drawImage(function(){let e=d.getContext("2d");return e.clearRect(0,0,F,F),null!==p&&ue(e,G-y/2,j-y/2,Y[p],!1),d}(),0,0,F,F),0===G&&0===j||!1!==q||n.drawImage(function(){let e=G-G%y,n=j-j%y,o=i.getContext("2d"),r=o.createRadialGradient(e,n,0,e,n,y);if(r.addColorStop(.3,B),r.addColorStop(1,"#148d14"),o.clearRect(0,0,F,F),o.globalAlpha=.35,o.fillStyle=r,o.lineWidth=1,o.beginPath(),o.fillRect(e,n,y,y),!0===l&&null===p)return i;let a=e/y*10+n/y;if(Y[a]*S>0){let l=t.getCanMovePanelX(a,Y);for(let t=0;t<=l.length-1;t++)e=Math.floor(l[t]/10),n=Math.floor(l[t]%10),o.globalAlpha=.6,o.strokeStyle=B,o.lineWidth=y/20,o.beginPath(),o.arc(e*y+y/2,n*y+y/2,y/2-y/10,0,2*Math.PI,!1),o.stroke()}return i}(),0,0,F,F),(o||null!==I)&&!1===q&&0==E&&n.drawImage(function(){let e=g.getContext("2d"),t="",n=Math.round(1.5*y),l="#0099E6",o="#E60073";return e.clearRect(0,0,F,F),e.globalAlpha=.4,e.textBaseline="middle",e.textAlign="center",e.shadowBlur=10,e.shadowColor="rgba(0, 0, 0, 0.5)",e.font="bold "+n+"px Play,sans-serif",e.globalAlpha=.3,e.shadowBlur=2,e.shadowColor="rgba(255, 255, 255, 1)",e.fillStyle=o,t=M,e.beginPath(),e.fillText(t,1*y,3.8*y),t="8",e.beginPath(),e.fillText(t,2*y,5.3*y),e.lineWidth=.2*y,e.strokeStyle=o,e.beginPath(),e.moveTo(.4*y,5.55*y),e.lineTo(2.6*y,3.55*y),e.closePath(),e.stroke(),t=b,e.fillStyle=l,e.beginPath(),e.fillText(t,4*y,.7*y),t="8",e.beginPath(),e.fillText(t,5*y,2.3*y),e.lineWidth=.2*y,e.strokeStyle=l,e.beginPath(),e.moveTo(3.4*y,2.55*y),e.lineTo(5.6*y,.55*y),e.closePath(),e.stroke(),g}(),0,0,F,F),n.drawImage(function(){let e=s.getContext("2d"),t=1.3*y,n=2.5*y;if(e.clearRect(0,0,F,F),""===x)return s;e.shadowBlur=10,e.shadowColor="rgba(100, 100, 100, 0.5)",e.shadowOffsetX=5,e.shadowOffsetY=5,e.globalAlpha=.9,e.fillStyle=X,de(e,t,n,3.4*y,1*y,y/20);let l=Math.round(.36*y);return e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowColor="rgba(0, 0, 0, 0)",e.font="bold "+l+"px Play,sans-serif",e.globalAlpha=1,e.fillStyle=R,e.textBaseline="middle",e.textAlign="center",e.beginPath(),e.fillText(x,3*y,3*y),s}(),0,0,F,F),!0===q&&n.drawImage(function(){let e=f.getContext("2d");e.clearRect(0,0,F,F),e.globalAlpha=.5,e.fillStyle="#000000",e.fillRect(0,0,F,F);let t=2*y,n=3.5*y;e.shadowBlur=20,e.shadowColor="rgba(0, 0, 0, 0.3)",e.shadowOffsetX=5,e.shadowOffsetY=5,e.globalAlpha=.8,e.fillStyle=X,e.beginPath(),de(e,t,n,2*y,1*y,y/20),e.shadowColor="rgba(0, 0, 0, 0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;let l=Math.round(.5*y),o="Play";return o+=T%10==0?" ":"",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowColor="rgba(0, 0, 0, 0)",e.font="bold "+l+"px Play,sans-serif",e.globalAlpha=1,e.fillStyle=R,e.textBaseline="middle",e.textAlign="center",e.beginPath(),e.fillText(o,3*y,4*y),o="colamone",l=Math.round(1*y),e.font="bold "+l+"px Play,sans-serif",e.fillStyle=X,e.shadowBlur=0,e.beginPath(),e.fillText(o,3*y,2*y),f}(),0,0,F,F)}function ue(e,t,l,o,r){let a;if(0===o)return e;a=o>0?O:_;let i=n.createLinearGradient(t,l,t+y,l+y);i.addColorStop(0,"rgb(255, 255, 255)"),i.addColorStop(.4,a),i.addColorStop(1,a),e.shadowBlur=10,e.shadowColor="rgba(0, 0, 0, 1)",e.shadowOffsetX=2,e.shadowOffsetY=2,e.fillStyle=i,e.beginPath(),de(e,t+y/10,l+y/10,y-1*y/5,y-1*y/5,y/20),e.shadowColor="rgba(0, 0, 0, 0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,w&&(e.globalAlpha=.35,e.save(),e.clip(),e.drawImage(function(){let e=h.getContext("2d");return w&&e.drawImage(J,0,0,F/N,F/N,0,0,F,F),h}(),t+y/10,l+y/10,y-1*y/5,y-1*y/5),e.restore(),e.globalAlpha=1),e.fillStyle=X;let c=Math.round(.18*y);e.textBaseline="middle",e.textAlign="center",e.font=c+"pt 'Play',Arial",e.beginPath(),e.fillText(Math.abs(o),t+y/2,l+y/2);for(let n=0;n<=H[o].length-1;n++){if(0===H[o][n])continue;let r=t+y/4.16+Math.floor(y-1*y/5)/3*Math.floor(n%3),a=l+y/4.16+Math.floor(y-1*y/5)/3*Math.floor(n/3);e.fillStyle=X,e.beginPath(),e.arc(r,a,.06*y,0,2*Math.PI,!1),e.fill()}return r&&(e.shadowBlur=10,e.shadowColor="rgba(0, 0, 0, 1)",e.globalAlpha=1,e.fillStyle=X,c=Math.round(.5*y),e.textBaseline="middle",e.textAlign="center",e.font="bolder "+c+"pt Play,Arial ",e.beginPath(),e.fillText(Math.abs(o),t+y/2,l+y/2),e.globalAlpha=1,e.shadowColor="rgba(0, 0, 0, 0)",e.shadowBlur=0),e}function de(e,t,n,l,o,r){e.beginPath(),e.moveTo(t+r,n),e.lineTo(t+l-r,n),e.arc(t+l-r,n+r,r,1.5*Math.PI,0,!1),e.lineTo(t+l,n+o-r),e.arc(t+l-r,n+o-r,r,0,.5*Math.PI,!1),e.lineTo(t+r,n+o),e.arc(t+r,n+o-r,r,.5*Math.PI,Math.PI,!1),e.lineTo(t,n+r),e.arc(t+r,n+r,r,Math.PI,1.5*Math.PI,!1),e.closePath(),e.fill()}function se(){fe(),document.querySelector("#blue").innerHTML="Blue: "+b+"/8",document.querySelector("#red").innerHTML=" Red: "+M+"/8",document.querySelector("#time").innerHTML="("+P.toFixed(3)+"sec)",0===z.length&&(1==I?(x="You win!",V.setItem("level_"+document.querySelector("#level").value,parseInt(V.getItem("level_"+document.querySelector("#level").value))+1),he()):-1==I?(x="You lose...",V.setItem("level_"+document.querySelector("#level").value,0),he()):0===I&&(x=D[JSON.stringify(Y)]>=3?"3fold repetition":"-- Draw --",he())),V.getItem("level_"+document.querySelector("#level").value)>0?document.querySelector("#wins").innerHTML=V.getItem("level_"+document.querySelector("#level").value)+" win!":document.querySelector("#wins").innerHTML=""}function he(){0===z.length&&(document.querySelector("#span_replay").classList.remove("hide"),document.querySelector("#span_tweetlog").classList.remove("hide"))}function fe(){let e=0,n=0,l=[0,10,20,30,40,50],o=[5,15,25,35,45,55];for(let t in l)1*Y[l[t]]>0&&(e+=Y[l[t]]);for(let e in o)-1*Y[o[e]]>0&&(n+=Y[o[e]]);e>=8?I=1:n<=-8&&(I=-1),function(e){let n=!1,l=!1;for(let o in e)if(0!==e[o]&&(0!==t.getCanMovePanelX(o,e).length&&(e[o]>0?n=!0:e[o]<0&&(l=!0)),n&&l))return!1;return!0}(Y)?Math.abs(e)>Math.abs(n)?I=1:Math.abs(e)<Math.abs(n)?I=-1:Math.abs(e)==Math.abs(n)&&(I=0):!0===function(e){let t=JSON.stringify(e);return void 0===D[t]?(D[t]=1,!1):(D[t]+=1,D[t]>=3)}(Y)&&(I=0),b=Math.abs(e),M=Math.abs(n)}function ge(){let e={};if(1<document.location.search.length){let t=document.location.search.substring(1).split("&");for(let n=0;n<t.length;n++){let l=t[n].split("="),o=decodeURIComponent(l[0]),r=decodeURIComponent(l[1]);e[o]=decodeURIComponent(r)}}return e}function me(e){let t="";for(let n in e){let l=e[n][0],o=e[n][1],r=Math.floor(o/10)-Math.floor(l/10),a=Math.floor(o%10)-Math.floor(l%10),i="";-1===r&&-1===a&&(i="q"),0===r&&-1===a&&(i="w"),1===r&&-1===a&&(i="e"),-1===r&&0===a&&(i="a"),0===r&&0===a&&(i="s"),1===r&&0===a&&(i="d"),-1===r&&1===a&&(i="z"),0===r&&1===a&&(i="x"),1===r&&1===a&&(i="c"),t+=l+i}return t}function ve(){W=0,E=!1,Y=t.copyMap(z[W]),I=null,o=!1,se(),ce(!1,!1)}function we(){W<=0||(E=!1,W-=1,Y=t.copyMap(z[W]),I=null,o=!1,se(),ce(!1,!1))}function pe(){W+1>z.length-1||(W+=1,Y=t.copyMap(z[W]),se(),ce(!1,!1))}function ye(){W=z.length-1,E=!1,Y=t.copyMap(z[W]),se(),ce(!1,!1)}function Se(){let e=document.location.href.split("?")[0];if(!0===q)return void ne(null);let n=ge();n.lang&&(e+="?lang="+n.lang),navigator.onLine?location.href=e:(Y=t.copyMap(U),ae(),$=[],x="",I=null,S=1,ce(!1,!1))}function be(){let e=document.location.href.split("?")[0],t="?init="+U[55]+","+U[45]+","+U[35]+","+U[25]+","+U[15]+","+U[5]+","+U[44]+","+U[14],n="&log="+me($);n+="&lv="+document.querySelector("#level").value,location.href=e+t+n}function Me(){let e=document.location.href.split("?")[0],t="?init="+U[55]+","+U[45]+","+U[35]+","+U[25]+","+U[15]+","+U[5]+","+U[44]+","+U[14],n="%26log="+me($);n+="%26lv="+document.querySelector("#level").value,window.open("https://twitter.com/intent/tweet?text="+e+t+n+"%20%23colamone")}null===V&&(V={},V.getItem=function(){},V.setItem=function(){},navigator.cookieEnabled&&(V.hasItem=function(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},V.getItem=function(e){return e&&new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)?unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1")):null},V.setItem=function(e,t){e&&!/^(?:expires|max\-age|path|domain|secure)$/i.test(e)&&(document.cookie=escape(e)+"="+escape(t))}))}((0).self||e.g),document.addEventListener("DOMContentLoaded",(function(){BoardGamejs.init()}))})();
//# sourceMappingURL=main.js.map